import { getValue, setValue, setPort, setResourcePool, getValueFromPool, addValueToPool } from './client.js';
export default class SharedStoreService {
    _browser;
    constructor(_, caps) {
        setPort(caps['wdio:sharedStoreServicePort']);
    }
    before(caps, specs, browser) {
        this._browser = browser;
        const sharedStore = Object.create({}, {
            get: {
                value: (key) => this._browser?.call(() => getValue(key))
            },
            set: {
                value: (key, value) => this._browser?.call(() => setValue(key, value))
            },
            setResourcePool: {
                value: (key, value) => this._browser?.call(() => setResourcePool(key, value))
            },
            getValueFromPool: {
                value: (key, options) => this._browser?.call(() => getValueFromPool(key, options))
            },
            addValueToPool: {
                value: (key, value) => this._browser?.call(() => addValueToPool(key, value))
            }
        });
        this._browser.sharedStore = sharedStore;
    }
}
